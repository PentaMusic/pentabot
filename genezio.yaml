name: pentabot
region: us-east-1
yamlVersion: 2

backend:
  path: server
  language:
    name: js
    packageManager: npm
  environment:
    EXECUTOR_URL: ${{backend.functions.executor.url}}
  functions:
    - name: agent
      path: ./agent
      entry: index.js
      type: httpServer

    - name: executor
      path: ./executor
      entry: index.js
      type: httpServer
      maxConcurrentRequestsPerInstance: 1

frontend:
  environment:
    VITE_API_URL: ${{backend.functions.agent.url}}
  path: client
  publish: dist
  script:
    build: npm run build
    deploy: npm install
  subdomain: amazing-coffee
